Source:

checking for oracle environment variables and connecting to sql utilitiy

[oracle@vamshi ~]$ env |grep ORA
ORACLE_SID=proddb
ORACLE_HOME=/u01/app/oracle/product/19.0.0.0/dbhome_1
[oracle@vamshi ~]$ 
[oracle@vamshi ~]$ sqlplus / as sysdba

SQL> startup;
ORACLE instance started.

Total System Global Area 2415918608 bytes
Fixed Size		    9137680 bytes
Variable Size		  536870912 bytes
Database Buffers	 1862270976 bytes
Redo Buffers		    7639040 bytes
Database mounted.
Database opened.
SQL> 
SQL>

Checking for available pdbs
 
SQL> show pdbs

    CON_ID CON_NAME			  OPEN MODE  RESTRICTED
---------- ------------------------------ ---------- ----------
	 2 PDB$SEED			  READ ONLY  NO
	 3 AXIS 			  READ WRITE NO
	 4 ICICI			  READ WRITE NO
	 5 SBI				  READ WRITE NO
	 6 HDFC 			  READ WRITE NO


creating duplicate pluggable database with existed pluggable database 

SQL> create pluggable database axis_dup from axis;

Pluggable database created.

SQL> show pdbs

    CON_ID CON_NAME			  OPEN MODE  RESTRICTED
---------- ------------------------------ ---------- ----------
	 2 PDB$SEED			  READ ONLY  NO
	 3 AXIS 			  READ WRITE NO
	 4 ICICI			  READ WRITE NO
	 5 SBI				  READ WRITE NO
	 6 HDFC 			  READ WRITE NO
	 7 AXIS_DUP			  MOUNTED
SQL> 
SQL> 
SQL> exit



exited from sql and connecting to oracle and going to admin path 
[oracle@vamshi ~]$ cd $ORACLE_HOME
[oracle@vamshi dbhome_1]$ cd network/admin/

checking for listener.ora and tnsnames.ora files

[oracle@vamshi admin]$ ls -lrt
total 16
-rw-r--r--. 1 oracle oinstall 1536 Feb 14  2018 shrept.lst
drwxr-xr-x. 2 oracle oinstall   64 Nov 22 09:17 samples
-rw-r--r--. 1 oracle oinstall   90 Nov 23 09:50 afiedt.buf
-rw-r--r--. 1 oracle oinstall 1037 Nov 28 09:24 listener.ora
-rw-r--r--. 1 oracle oinstall  333 Nov 28 09:29 tnsnames.ora

checking the listener connections available for existed pdbs
[oracle@vamshi admin]$ cat listener.ora 
# listener.ora Network Configuration File: /u01/app/oracle/product/19.0.0.0/dbhome_1/network/admin/listener.ora
# Generated by Oracle configuration tools.

SID_LIST_LISTENER =
  (SID_LIST =
    (SID_DESC =
      (GLOBAL_DBNAME = proddb)
      (ORACLE_HOME = /u01/app/oracle/product/19.0.0.0/dbhome_1)
      (SID_NAME = proddb)
    )
    (SID_DESC =
      (GLOBAL_DBNAME = axis)
      (ORACLE_HOME = /u01/app/oracle/product/19.0.0.0/dbhome_1)
      (SID_NAME = proddb)
    )
    (SID_DESC =
      (GLOBAL_DBNAME = sbi)
      (ORACLE_HOME = /u01/app/oracle/product/19.0.0.0/dbhome_1)
      (SID_NAME = proddb)
    )
    (SID_DESC =
      (GLOBAL_DBNAME = icici)
      (ORACLE_HOME = /u01/app/oracle/product/19.0.0.0/dbhome_1)
      (SID_NAME = proddb)
    )
    (SID_DESC =
      (GLOBAL_DBNAME = hdfc)
      (ORACLE_HOME = /u01/app/oracle/product/19.0.0.0/dbhome_1)
      (SID_NAME = proddb)
    )
  )

LISTENER =
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = vamshi.com)(PORT = 1521))
  )

ADR_BASE_LISTENER = /u01/app/oracle

[oracle@vamshi admin]$ lsnrctl start

LSNRCTL for Linux: Version 19.0.0.0.0 - Production on 29-NOV-2024 09:14:37

Copyright (c) 1991, 2019, Oracle.  All rights reserved.

Starting /u01/app/oracle/product/19.0.0.0/dbhome_1/bin/tnslsnr: please wait...

TNSLSNR for Linux: Version 19.0.0.0.0 - Production
System parameter file is /u01/app/oracle/product/19.0.0.0/dbhome_1/network/admin/listener.ora
Log messages written to /u01/app/oracle/diag/tnslsnr/vamshi/listener/alert/log.xml
Listening on: (DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=vamshi.com)(PORT=1521)))

Connecting to (DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=vamshi.com)(PORT=1521)))
STATUS of the LISTENER
------------------------
Alias                     LISTENER
Version                   TNSLSNR for Linux: Version 19.0.0.0.0 - Production
Start Date                29-NOV-2024 09:14:37
Uptime                    0 days 0 hr. 0 min. 0 sec
Trace Level               off
Security                  ON: Local OS Authentication
SNMP                      OFF
Listener Parameter File   /u01/app/oracle/product/19.0.0.0/dbhome_1/network/admin/listener.ora
Listener Log File         /u01/app/oracle/diag/tnslsnr/vamshi/listener/alert/log.xml
Listening Endpoints Summary...
  (DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=vamshi.com)(PORT=1521)))
Services Summary...
Service "axis" has 1 instance(s).
  Instance "proddb", status UNKNOWN, has 1 handler(s) for this service...
Service "hdfc" has 1 instance(s).
  Instance "proddb", status UNKNOWN, has 1 handler(s) for this service...
Service "icici" has 1 instance(s).
  Instance "proddb", status UNKNOWN, has 1 handler(s) for this service...
Service "proddb" has 1 instance(s).
  Instance "proddb", status UNKNOWN, has 1 handler(s) for this service...
Service "sbi" has 1 instance(s).
  Instance "proddb", status UNKNOWN, has 1 handler(s) for this service...
The command completed successfully
[oracle@vamshi admin]$ 
[oracle@vamshi admin]$ 
[oracle@vamshi admin]$ 
[oracle@vamshi admin]$ 
[oracle@vamshi admin]$ cat tnsnames.ora 
# tnsnames.ora Network Configuration File: /u01/app/oracle/product/19.0.0.0/dbhome_1/network/admin/tnsnames.ora
# Generated by Oracle configuration tools.

TO_SBI =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = vamshi.com)(PORT = 1521))
    )
    (CONNECT_DATA =
      (SERVICE_NAME = sbi)
    )
  )

[oracle@vamshi admin]$ 
[oracle@vamshi admin]$ 
[oracle@vamshi admin]$ netmgr
[oracle@vamshi admin]$ 
[oracle@vamshi admin]$ 
[oracle@vamshi admin]$ cat tnsnames.ora 
# tnsnames.ora Network Configuration File: /u01/app/oracle/product/19.0.0.0/dbhome_1/network/admin/tnsnames.ora
# Generated by Oracle configuration tools.

TO_AXIS =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.0.135)(PORT = 1521))
    )
    (CONNECT_DATA =
      (SERVICE_NAME = axis)
    )
  )

TO_SBI =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = vamshi.com)(PORT = 1521))
    )
    (CONNECT_DATA =
      (SERVICE_NAME = sbi)
    )
  )

[oracle@vamshi admin]$ 
trying to connect pdb axis from network/admin/   location


[oracle@vamshi admin]$ sqlplus sys/oracledb@to_axis as sysdba

SQL> 
SQL> show con_name

CON_NAME
------------------------------
AXIS

 
SQL> exit
now to trying to connect to user in axis pdb from oracle network/admin/ location

[oracle@vamshi admin]$ sqlplus scott/tiger@to_axis

Connected

checking for user (show user) and pdb (show con_name)

SQL> show user
USER is "SCOTT"
SQL> show con_name

CON_NAME
------------------------------
AXIS

creating table in the user scott
 
SQL> create table emp (empno number,ename varchar2(10));

Table created.

SQL> 
SQL> insert into emp values (1,'scott');
insert into emp values (1,'scott')
            *
ERROR at line 1:
ORA-01950: no privileges on tablespace 'USERS'

There is no tablespace allocated to the table created by user scott give privileges to scott user

 
SQL> alter user scott quota unlimited on users;

User altered.




SQL> insert into emp values (1,'scott');

1 row created.

SQL> commit; 

Commit complete.

SQL> insert into emp values (2,'tiger');

1 row created.

SQL> insert into emp values (3,'abc');

1 row created.

SQL> commit;

Commit complete.

SQL> 
SQL> select * from emp;

     EMPNO ENAME
---------- ----------
	 1 scott
	 2 tiger
	 3 abc

SQL> 
SQL> exit

getting exit from sql user scott and connecting to pdb axis 

[oracle@vamshi admin]$ sqlplus sys/oracledb@to_axis as sysdba

now in pdb axis and creating another user in axis pdb

 
SQL> create user axis_pdbuser identified by axis_pdbuser;

User created.

SQL> 
SQL> grant create session,connect,resource to axis_pdbuser;

Grant succeeded.

SQL> 
SQL> grant create pluggable database to axis_pdbuser;

Grant succeeded.

SQL> exit
 exiting from sql pdb axis and connecting to sqlplus as sysdba
 
[oracle@vamshi admin]$ sqlplus / as sysdba



Now the process of cloning pdb starts

SQL> show pdbs

    CON_ID CON_NAME			  OPEN MODE  RESTRICTED
---------- ------------------------------ ---------- ----------
	 2 PDB$SEED			  READ ONLY  NO
	 3 AXIS 			  READ WRITE NO
	 4 ICICI			  READ WRITE NO
	 5 SBI				  READ WRITE NO
	 6 HDFC 			  READ WRITE NO
	 7 AXIS_DUP			  MOUNTED
	 
	 here all the pluggable databases are in open state now closing axis pdb for cloning purpose
	 
SQL> alter pluggable database axis close;

Pluggable database altered.

now making the axis pluggable database in read only MODE (it is mandatory)

SQL> alter pluggable database axis open read only;

Pluggable database altered.

SQL> 
SQL> show pdbs

    CON_ID CON_NAME			  OPEN MODE  RESTRICTED
---------- ------------------------------ ---------- ----------
	 2 PDB$SEED			  READ ONLY  NO
	 3 AXIS 			  READ ONLY  NO
	 4 ICICI			  READ WRITE NO
	 5 SBI				  READ WRITE NO
	 6 HDFC 			  READ WRITE NO
	 7 AXIS_DUP			  MOUNTED
SQL> 
SQL> exit

exiting from sql

viewing tnsnames for axis pdb tns details to copy from here to remore server user paste purpose

[oracle@vamshi admin]$ cat tnsnames.ora 
# tnsnames.ora Network Configuration File: /u01/app/oracle/product/19.0.0.0/dbhome_1/network/admin/tnsnames.ora
# Generated by Oracle configuration tools.

TO_AXIS =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.0.135)(PORT = 1521))
    )
    (CONNECT_DATA =
      (SERVICE_NAME = axis)
    )
  )

TO_SBI =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = vamshi.com)(PORT = 1521))
    )
    (CONNECT_DATA =
      (SERVICE_NAME = sbi)
    )
  )

[oracle@vamshi admin]$ 






*******************************************    target    *****************************

checking for smon running or not

[oracle@venky ~]$ ps -ef|grep smon
oracle    3356     1  0 09:03 ?        00:00:00 ora_smon_prodb
oracle    4077  4011  0 09:13 pts/2    00:00:00 grep --color=auto smon
[oracle@venky ~]$


getting environment Variable details

[oracle@venky ~]$ env |grep ORA
ORACLE_SID=vendb
ORACLE_BASE=/u01/app/oracle
ORACLE_HOME=/u01/app/oracle/product/19.0.0.0/dbhome_1


connecting to sql 

[oracle@venky ~]$ . oraenv
ORACLE_SID = [vendb] ? prodb
The Oracle base remains unchanged with value /u01/app/oracle
[oracle@venky ~]$
[oracle@venky ~]$ sqlplus / as sysdba




SQL> show db_uniq
SP2-0158: unknown SHOW option "db_uniq"
SQL>
SQL> show parameter db_uniq

NAME                                 TYPE        VALUE
------------------------------------ ----------- ------------------------------
db_unique_name                       string      prodb

connected to remote user sql checking for remote users pdbs
SQL> show pdbs

    CON_ID CON_NAME                       OPEN MODE  RESTRICTED
---------- ------------------------------ ---------- ----------
         2 PDB$SEED                       READ ONLY  NO
         3 SBI                            MOUNTED
         4 HDFC                           MOUNTED
         5 AXIS                           MOUNTED
         6 ICICI_DUP                      MOUNTED
         7 ICICI                          MOUNTED
SQL>

SQL> SQL>
SQL> exit

Going to remoter user network/admin/ location to paste source user axis pdb tns details in target user tnsnames

[oracle@venky ~]$ cd $ORACLE_HOME
[oracle@venky dbhome_1]$ cd network/admin/
[oracle@venky admin]$ ls -lrt
total 12
-rw-r--r--. 1 oracle oinstall 1536 Feb 14  2018 shrept.lst
drwxr-xr-x. 2 oracle oinstall   64 Apr 17  2019 samples
-rw-r--r--. 1 oracle oinstall 1034 Nov 29 09:05 listener.ora
-rw-r--r--. 1 oracle oinstall  884 Nov 29 09:07 tnsnames.ora
[oracle@venky admin]$
[oracle@venky admin]$ cat tnsnames.ora
# tnsnames.ora Network Configuration File: /u01/app/oracle/product/19.0.0.0/dbhome_1/network/admin/tnsnames.ora
# Generated by Oracle configuration tools.

TO_HDFC =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.0.144)(PORT = 1521))
    )
    (CONNECT_DATA =
      (SERVICE_NAME = hdfc)
    )
  )

TO_AXIS =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.0.144)(PORT = 1521))
    )
    (CONNECT_DATA =
      (SERVICE_NAME = axis)
    )
  )

TO_SBI =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.0.144)(PORT = 1521))
    )
    (CONNECT_DATA =
      (SERVICE_NAME = sbi)
    )
  )

TO_PRODB =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.0.144)(PORT = 1521))
    )
    (CONNECT_DATA =
      (SERVICE_NAME = prodb)
    )
  )

[oracle@venky admin]$ vi tnsnames.ora


making move tnsnames.ora to bkp
[oracle@venky admin]$ mv tnsnames.ora tnsnames.ora_bkp
[oracle@venky admin]$
[oracle@venky admin]$ vi tnsnames.ora



copied the tnsnames

[oracle@venky admin]$ sqlplus sys/oracledb@to_axis as sysdba
 checking for connections with axis pdb
 

SQL>
SQL> exit



[oracle@venky admin]$ sqlplus / as sysdba



SQL> show parameter db_uniq

NAME                                 TYPE        VALUE
------------------------------------ ----------- ------------------------------
db_unique_name                       string      prodb
SQL>
SQL>
SQL>
SQL>
SQL> create database link to_axis_proddb connect to axis_pdbuser identified by axis_pdbuser using 'to_axis';

Database link created.


SQL> select user from dual@to_axis_proddb;

USER
--------------------------------------------------------------------------------
SYS

SQL>
SQL>
SQL> create pluggable database axis_proddb from axis@to_axis_proddb;

Pluggable database created.

SQL>

SQL> SQL>
SQL> show pdbs

    CON_ID CON_NAME                       OPEN MODE  RESTRICTED
---------- ------------------------------ ---------- ----------
         2 PDB$SEED                       READ ONLY  NO
         3 SBI                            MOUNTED
         4 HDFC                           MOUNTED
         5 AXIS                           MOUNTED
         6 ICICI_DUP                      MOUNTED
         7 ICICI                          MOUNTED
         8 AXIS_PRODDB                    MOUNTED
SQL>
SQL>
SQL> alter pluggable database axis_proddb open;

Pluggable database altered.

SQL>

SQL> SQL>
SQL>
SQL>
SQL> select owner,object_name,object_type from dba_objects where owner='SCOTT';

no rows selected

SQL> alter session set container=axis_proddb;

Session altered.

SQL> select owner,object_name,object_type from dba_objects where owner='SCOTT';

OWNER
--------------------------------------------------------------------------------
OBJECT_NAME
--------------------------------------------------------------------------------
OBJECT_TYPE
-----------------------
SCOTT
EMP
TABLE


SQL>
SQL>

SQL> SQL>
SQL>

SQL> SQL>
SQL>
SQL> show con_name

CON_NAME
------------------------------
AXIS_PRODDB
SQL>
SQL>
SQL> alter session set container=cdb$root;

Session altered.

SQL>
SQL>
SQL> show pdbs

    CON_ID CON_NAME                       OPEN MODE  RESTRICTED
---------- ------------------------------ ---------- ----------
         2 PDB$SEED                       READ ONLY  NO
         3 SBI                            MOUNTED
         4 HDFC                           MOUNTED
         5 AXIS                           MOUNTED
         6 ICICI_DUP                      MOUNTED
         7 ICICI                          MOUNTED
         8 AXIS_PRODDB                    READ WRITE NO
SQL> alter session set container =HDFC;

Session altered.

SQL>
SQL>
SQL>
SQL>
SQL> create database link scott_axis connect to scott identified by tiger using 'to_axis';
create database link scott_axis connect to scott identified by tiger using 'to_axis'
                     *
ERROR at line 1:
ORA-01109: database not open

while giving the dblink we have to keep pdb in open mode 


SQL> create database link scott_axis connect to scott identified by tiger using 'to_axis';

Database link created.


SQL> create materialized view emp_Scott_mv as select * from emp@scott_axis;

Materialized view created.

SQL>
SQL>
SQL> select * from emp_Scott_mv;

     EMPNO ENAME
---------- ----------
         1 scott
         2 tiger
         3 abc

SQL>





















[oracle@venky admin]$ cd
[oracle@venky ~]$ . oraenv
ORACLE_SID = [vendb] ? prodb
The Oracle base remains unchanged with value /u01/app/oracle
[oracle@venky ~]$ sqlplus / as sysdba

SQL*Plus: Release 19.0.0.0.0 - Production on Sat Nov 30 15:45:21 2024
Version 19.3.0.0.0

Copyright (c) 1982, 2019, Oracle.  All rights reserved.


Connected to:
Oracle Database 19c Enterprise Edition Release 19.0.0.0.0 - Production
Version 19.3.0.0.0

SQL> show pdbs

    CON_ID CON_NAME			  OPEN MODE  RESTRICTED
---------- ------------------------------ ---------- ----------
	 2 PDB$SEED			  READ ONLY  NO
	 3 SBI				  READ WRITE NO
	 4 MRICICI			  READ WRITE NO
	 5 AXIS 			  READ WRITE NO
	 6 ICICI_DUP			  READ WRITE NO
	 7 ICICI			  READ WRITE NO
	 8 AXIS_PRODDB			  READ WRITE NO
	 9 HDFC 			  READ WRITE NO
	10 CBI				  READ WRITE NO
SQL> create database link dblinkpnb connect to laxmi identified by laxmi using 'to_pnb';

Database link created.

SQL> create pluggable database pnbdb from pnb@dblinkpnb;
create pluggable database pnbdb from pnb@dblinkpnb
*
ERROR at line 1:
ORA-17627: ORA-12543: TNS:destination host unreachable
ORA-17629: Cannot connect to the remote database server


SQL> create pluggable database pnbdb from pnb@dblinkpnb;
create pluggable database pnbdb from pnb@dblinkpnb
*
ERROR at line 1:
ORA-17628: Oracle error 1031 returned by remote Oracle server
ORA-01031: insufficient privileges


SQL> show pdbs

    CON_ID CON_NAME			  OPEN MODE  RESTRICTED
---------- ------------------------------ ---------- ----------
	 2 PDB$SEED			  READ ONLY  NO
	 3 SBI				  READ WRITE NO
	 4 MRICICI			  READ WRITE NO
	 5 AXIS 			  READ WRITE NO
	 6 ICICI_DUP			  READ WRITE NO
	 7 ICICI			  READ WRITE NO
	 8 AXIS_PRODDB			  READ WRITE NO
	 9 HDFC 			  READ WRITE NO
	10 CBI				  READ WRITE NO
SQL> 
SQL> 
SQL> 
SQL> 
SQL> show con_name

CON_NAME
------------------------------
CDB$ROOT
SQL> create pluggable database pnbdb from pnb@dblinkpnb;

Pluggable database created.

SQL> show pdbs

    CON_ID CON_NAME			  OPEN MODE  RESTRICTED
---------- ------------------------------ ---------- ----------
	 2 PDB$SEED			  READ ONLY  NO
	 3 SBI				  READ WRITE NO
	 4 MRICICI			  READ WRITE NO
	 5 AXIS 			  READ WRITE NO
	 6 ICICI_DUP			  READ WRITE NO
	 7 ICICI			  READ WRITE NO
	 8 AXIS_PRODDB			  READ WRITE NO
	 9 HDFC 			  READ WRITE NO
	10 CBI				  READ WRITE NO
	11 PNBDB			  MOUNTED
SQL> alter session set continer=pnbdb;
alter session set continer=pnbdb
                  *
ERROR at line 1:
ORA-02248: invalid option for ALTER SESSION


SQL> alter pluggable database pnbdb open;

Pluggable database altered.

SQL> alter session set container=pnbdb;

Session altered.

SQL> show pdbs

    CON_ID CON_NAME			  OPEN MODE  RESTRICTED
---------- ------------------------------ ---------- ----------
	11 PNBDB			  READ WRITE NO
SQL> conn laxmi/laxmi@to_pnb;
Connected.
SQL> select * from tab;

TNAME
--------------------------------------------------------------------------------
TABTYPE        CLUSTERID
------------- ----------
PNB_TAB
TABLE

PNBTABLE
TABLE


SQL> select * from pnbtable;

	AA NAME
---------- ----------
	10 name

SQL> show user
USER is "LAXMI"
SQL> insert into pnbtable values (44, 'names');

1 row created.

SQL> commit;

Commit complete.

SQL> select * from pnbtable;

	AA NAME
---------- ----------
	10 name
	44 names

SQL> insert into pnbtable values(50, 'edit');

1 row created.

SQL> commit;

Commit complete.

SQL> insert into pnbtable values(60, 'check');


^C





^Z



^C^C
^C





1 row created.


SQL> SQL> SQL> SQL> SQL> SQL> 
SQL> 
SQL> 
SQL> 
SQL> 
SQL> 
SQL> exit
Disconnected from Oracle Database 19c Enterprise Edition Release 19.0.0.0.0 - Production
Version 19.3.0.0.0
[oracle@venky ~]$ 
[oracle@venky ~]$ 
[oracle@venky ~]$ 
[oracle@venky ~]$ cd $ORACLE_HOME
[oracle@venky dbhome_1]$ cd network/admin/
[oracle@venky admin]$ cat tnsnames.ora 
# tnsnames.ora Network Configuration File: /u01/app/oracle/product/19.0.0.0/dbhome_1/network/admin/tnsnames.ora
# Generated by Oracle configuration tools.

TO_HDFC =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.0.144)(PORT = 1521))
    )
    (CONNECT_DATA =
      (SERVICE_NAME = hdfc)
    )
  )

TO_AXIS =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.0.144)(PORT = 1521))
    )
    (CONNECT_DATA =
      (SERVICE_NAME = axis)
    )
  )

TO_ICICI =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.0.144)(PORT = 1521))
    )
    (CONNECT_DATA =
      (SERVICE_NAME = icici)
    )
  )

HDFC =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.51.203)(PORT = 1521))
    )
    (CONNECT_DATA =
      (SERVICE_NAME = hdfc)
    )
  )

TO_SBI =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.0.144)(PORT = 1521))
    )
    (CONNECT_DATA =
      (SERVICE_NAME = sbi)
    )
  )

TO_CBI =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.0.144)(PORT = 1521))
    )
    (CONNECT_DATA =
      (SERVICE_NAME = cbi)
    )
  )
TO_PNB =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.0.166)(PORT = 1521))
    )
    (CONNECT_DATA =
      (SERVICE_NAME = pnb)
    )
  )

[oracle@venky admin]$ sqlplus / as sysdba

SQL*Plus: Release 19.0.0.0.0 - Production on Sat Nov 30 16:42:48 2024
Version 19.3.0.0.0

Copyright (c) 1982, 2019, Oracle.  All rights reserved.


Connected to:
Oracle Database 19c Enterprise Edition Release 19.0.0.0.0 - Production
Version 19.3.0.0.0

SQL> show pdbs

    CON_ID CON_NAME			  OPEN MODE  RESTRICTED
---------- ------------------------------ ---------- ----------
	 2 PDB$SEED			  READ ONLY  NO
	 3 SBI				  READ WRITE NO
	 4 MRICICI			  READ WRITE NO
	 5 AXIS 			  READ WRITE NO
	 6 ICICI_DUP			  READ WRITE NO
	 7 ICICI			  READ WRITE NO
	 8 AXIS_PRODDB			  READ WRITE NO
	 9 HDFC 			  READ WRITE NO
	10 CBI				  READ WRITE NO
	11 PNBDB			  READ WRITE NO
SQL> 



[oracle@venky admin]$ cd
[oracle@venky ~]$ . oraenv
ORACLE_SID = [vendb] ? prodb
The Oracle base remains unchanged with value /u01/app/oracle
[oracle@venky ~]$ sqlplus / as sysdba

SQL*Plus: Release 19.0.0.0.0 - Production on Sat Nov 30 15:45:21 2024
Version 19.3.0.0.0

Copyright (c) 1982, 2019, Oracle.  All rights reserved.


Connected to:
Oracle Database 19c Enterprise Edition Release 19.0.0.0.0 - Production
Version 19.3.0.0.0

SQL> show pdbs

    CON_ID CON_NAME			  OPEN MODE  RESTRICTED
---------- ------------------------------ ---------- ----------
	 2 PDB$SEED			  READ ONLY  NO
	 3 SBI				  READ WRITE NO
	 4 MRICICI			  READ WRITE NO
	 5 AXIS 			  READ WRITE NO
	 6 ICICI_DUP			  READ WRITE NO
	 7 ICICI			  READ WRITE NO
	 8 AXIS_PRODDB			  READ WRITE NO
	 9 HDFC 			  READ WRITE NO
	10 CBI				  READ WRITE NO
SQL> create database link dblinkpnb connect to laxmi identified by laxmi using 'to_pnb';

Database link created.

SQL> create pluggable database pnbdb from pnb@dblinkpnb;
create pluggable database pnbdb from pnb@dblinkpnb
*
ERROR at line 1:
ORA-17627: ORA-12543: TNS:destination host unreachable
ORA-17629: Cannot connect to the remote database server


SQL> create pluggable database pnbdb from pnb@dblinkpnb;
create pluggable database pnbdb from pnb@dblinkpnb
*
ERROR at line 1:
ORA-17628: Oracle error 1031 returned by remote Oracle server
ORA-01031: insufficient privileges


SQL> show pdbs

    CON_ID CON_NAME			  OPEN MODE  RESTRICTED
---------- ------------------------------ ---------- ----------
	 2 PDB$SEED			  READ ONLY  NO
	 3 SBI				  READ WRITE NO
	 4 MRICICI			  READ WRITE NO
	 5 AXIS 			  READ WRITE NO
	 6 ICICI_DUP			  READ WRITE NO
	 7 ICICI			  READ WRITE NO
	 8 AXIS_PRODDB			  READ WRITE NO
	 9 HDFC 			  READ WRITE NO
	10 CBI				  READ WRITE NO
SQL> 
SQL> 
SQL> 
SQL> 
SQL> show con_name

CON_NAME
------------------------------
CDB$ROOT
SQL> create pluggable database pnbdb from pnb@dblinkpnb;

Pluggable database created.

SQL> show pdbs

    CON_ID CON_NAME			  OPEN MODE  RESTRICTED
---------- ------------------------------ ---------- ----------
	 2 PDB$SEED			  READ ONLY  NO
	 3 SBI				  READ WRITE NO
	 4 MRICICI			  READ WRITE NO
	 5 AXIS 			  READ WRITE NO
	 6 ICICI_DUP			  READ WRITE NO
	 7 ICICI			  READ WRITE NO
	 8 AXIS_PRODDB			  READ WRITE NO
	 9 HDFC 			  READ WRITE NO
	10 CBI				  READ WRITE NO
	11 PNBDB			  MOUNTED
SQL> alter session set continer=pnbdb;
alter session set continer=pnbdb
                  *
ERROR at line 1:
ORA-02248: invalid option for ALTER SESSION


SQL> alter pluggable database pnbdb open;

Pluggable database altered.

SQL> alter session set container=pnbdb;

Session altered.

SQL> show pdbs

    CON_ID CON_NAME			  OPEN MODE  RESTRICTED
---------- ------------------------------ ---------- ----------
	11 PNBDB			  READ WRITE NO
SQL> conn laxmi/laxmi@to_pnb;
Connected.
SQL> select * from tab;

TNAME
--------------------------------------------------------------------------------
TABTYPE        CLUSTERID
------------- ----------
PNB_TAB
TABLE

PNBTABLE
TABLE


SQL> select * from pnbtable;

	AA NAME
---------- ----------
	10 name

SQL> show user
USER is "LAXMI"
SQL> insert into pnbtable values (44, 'names');

1 row created.

SQL> commit;

Commit complete.

SQL> select * from pnbtable;

	AA NAME
---------- ----------
	10 name
	44 names

SQL> insert into pnbtable values(50, 'edit');

1 row created.

SQL> commit;

Commit complete.

SQL> insert into pnbtable values(60, 'check');


^C





^Z



^C^C
^C





1 row created.


SQL> SQL> SQL> SQL> SQL> SQL> 
SQL> 
SQL> 
SQL> 
SQL> 
SQL> 
SQL> exit
Disconnected from Oracle Database 19c Enterprise Edition Release 19.0.0.0.0 - Production
Version 19.3.0.0.0
[oracle@venky ~]$ 
[oracle@venky ~]$ 
[oracle@venky ~]$ 
[oracle@venky ~]$ cd $ORACLE_HOME
[oracle@venky dbhome_1]$ cd network/admin/
[oracle@venky admin]$ cat tnsnames.ora 
# tnsnames.ora Network Configuration File: /u01/app/oracle/product/19.0.0.0/dbhome_1/network/admin/tnsnames.ora
# Generated by Oracle configuration tools.

TO_HDFC =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.0.144)(PORT = 1521))
    )
    (CONNECT_DATA =
      (SERVICE_NAME = hdfc)
    )
  )

TO_AXIS =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.0.144)(PORT = 1521))
    )
    (CONNECT_DATA =
      (SERVICE_NAME = axis)
    )
  )

TO_ICICI =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.0.144)(PORT = 1521))
    )
    (CONNECT_DATA =
      (SERVICE_NAME = icici)
    )
  )

HDFC =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.51.203)(PORT = 1521))
    )
    (CONNECT_DATA =
      (SERVICE_NAME = hdfc)
    )
  )

TO_SBI =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.0.144)(PORT = 1521))
    )
    (CONNECT_DATA =
      (SERVICE_NAME = sbi)
    )
  )

TO_CBI =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.0.144)(PORT = 1521))
    )
    (CONNECT_DATA =
      (SERVICE_NAME = cbi)
    )
  )
TO_PNB =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.0.166)(PORT = 1521))
    )
    (CONNECT_DATA =
      (SERVICE_NAME = pnb)
    )
  )

[oracle@venky admin]$ sqlplus / as sysdba

SQL*Plus: Release 19.0.0.0.0 - Production on Sat Nov 30 16:42:48 2024
Version 19.3.0.0.0

Copyright (c) 1982, 2019, Oracle.  All rights reserved.


Connected to:
Oracle Database 19c Enterprise Edition Release 19.0.0.0.0 - Production
Version 19.3.0.0.0

SQL> show pdbs

    CON_ID CON_NAME			  OPEN MODE  RESTRICTED
---------- ------------------------------ ---------- ----------
	 2 PDB$SEED			  READ ONLY  NO
	 3 SBI				  READ WRITE NO
	 4 MRICICI			  READ WRITE NO
	 5 AXIS 			  READ WRITE NO
	 6 ICICI_DUP			  READ WRITE NO
	 7 ICICI			  READ WRITE NO
	 8 AXIS_PRODDB			  READ WRITE NO
	 9 HDFC 			  READ WRITE NO
	10 CBI				  READ WRITE NO
	11 PNBDB			  READ WRITE NO
SQL> 
